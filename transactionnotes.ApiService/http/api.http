# Http file designed to be used with Visual Studio Code with REST Client extension.

### Get JWT token from Keycloak
# @name getToken
POST https://auth.nganfamily.com/realms/transactionnotes/protocol/openid-connect/token
Content-Type: application/x-www-form-urlencoded

client_id={{$dotenv client_id}}&client_secret={{$dotenv client_secret}}&grant_type=password&username={{$dotenv username}}&password={{$dotenv pwd}}

### Ping endpoint (health check)
GET http://localhost:5324/api/v1/ping
Accept: application/json

###

### Ping with Authentication
GET http://localhost:5324/api/v1/ping/secure
Authorization: Bearer {{getToken.response.body.access_token}}
Accept: application/json

###

### Ping with Authorization and check if user is allowed
GET http://localhost:5324/api/v1/ping/allowed
Authorization: Bearer {{getToken.response.body.access_token}}
Accept: application/json

###

### List users (replace with your actual endpoint if different)
GET http://localhost:5324/api/v1/users
Authorization: Bearer {{getToken.response.body.access_token}}
Accept: application/json

###


### Example: Get a single user by ID (replace {id} with a real user ID)
GET http://localhost:5324/api/v1/users/{id}
Authorization: Bearer  {{getToken.response.body.access_token}}
Accept: application/json

###

### Example: Create a new user (replace with your actual model)
POST http://localhost:5324/api/v1/users
Authorization: Bearer {{getToken.response.body.access_token}}
Content-Type: application/json
Accept: application/json

{
  "name": "Test User",
  "email": "test@example.com"
}

###

### Example: Invalid token (to see RFC 7807 ProblemDetails)
GET http://localhost:5324/api/v1/users
Authorization: Bearer invalid_token
Accept: application/json

###